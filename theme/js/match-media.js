(function(){'use strict';var app=angular.module('matchMedia',[]);app.run(function initializeNgMatchMedia(){window.matchMedia||(window.matchMedia=function matchMediaPolyfill(){var styleMedia=(window.styleMedia||window.media);if(!styleMedia){var style=document.createElement('style'),script=document.getElementsByTagName('script')[0],info=null;style.type='text/css';style.id='matchmediajs-test';script.parentNode.insertBefore(style,script);info=('getComputedStyle'in window)&&window.getComputedStyle(style,null)||style.currentStyle;styleMedia={matchMedium:function(media){var text='@media '+media+'{ #matchmediajs-test { width: 1px; } }';if(style.styleSheet){style.styleSheet.cssText=text;}else{style.textContent=text;}return info.width==='1px';}};}return function(media){return{matches:styleMedia.matchMedium(media||'all'),media:media||'all'};};}());});app.service('screenSize',screenSize);screenSize.$inject=['$rootScope'];function screenSize($rootScope){var defaultRules={lg:'(min-width: 1200px)',md:'(min-width: 992px) and (max-width: 1199px)',sm:'(min-width: 768px) and (max-width: 991px)',xs:'(max-width: 767px)'};this.isRetina=(window.devicePixelRatio>1||(window.matchMedia&&window.matchMedia('(-webkit-min-device-pixel-ratio: 1.5),(-moz-min-device-pixel-ratio: 1.5),(min-device-pixel-ratio: 1.5),(min-resolution: 192dpi),(min-resolution: 2dppx)').matches));var that=this;var safeApply=function(fn,scope){scope=scope||$rootScope;var phase=scope.$root.$$phase;if(phase==='$apply'||phase==='$digest'){if(fn&&(typeof(fn)==='function')){fn();}}else{scope.$apply(fn);}};var assureList=function(list){if(typeof list!=='string'&&Object.prototype.toString.call(list)!=='[object Array]'){throw new Error('screenSize requires array or comma-separated list');}return typeof list==='string'?list.split(/\s*,\s*/):list;};var getCurrentMatch=function(){var rules=that.rules||defaultRules;for(var property in rules){if(rules.hasOwnProperty(property)){if(window.matchMedia(rules[property]).matches){return property;}}}};this.get=getCurrentMatch;this.is=function(list){list=assureList(list);return list.indexOf(getCurrentMatch())!==-1;};this.on=function(list,callback,scope){window.addEventListener('resize',listenerFunc);if(scope){scope.$on('$destroy',function(){window.removeEventListener('resize',listenerFunc);});}return that.is(list);function listenerFunc(){safeApply(callback(that.is(list)),scope);}};this.onChange=function(scope,list,callback){var currentMatch=getCurrentMatch();list=assureList(list);if(!scope){throw'scope has to be applied for cleanup reasons. (destroy)';}window.addEventListener('resize',listenerFunc);scope.$on('$destroy',function(){window.removeEventListener('resize',listenerFunc);});return that.is(list);function listenerFunc(){var previousMatch=currentMatch;currentMatch=getCurrentMatch();var wasPreviousMatch=list.indexOf(previousMatch)!==-1;var doesCurrentMatch=list.indexOf(currentMatch)!==-1;if(wasPreviousMatch!==doesCurrentMatch){safeApply(callback(doesCurrentMatch),scope);}}};this.when=function(list,callback,scope){window.addEventListener('resize',function(){if(that.is(list)===true){safeApply(callback(that.is(list)),scope);}});return that.is(list);};}app.filter('media',['screenSize',function(screenSize){var mediaFilter=function(inputValue,options){var size=screenSize.get();var returnedName='';if(!options){return size;}if(options.groups){for(var prop in options.groups){if(options.groups.hasOwnProperty(prop)){var index=options.groups[prop].indexOf(size);if(index>=0){returnedName=prop;}}}if(returnedName===''){returnedName=size;}}if(options.replace&&typeof options.replace==='string'&&options.replace.length>0){return inputValue.replace(options.replace,returnedName);}else{return returnedName;}};mediaFilter.$stateful=true;return mediaFilter;}]);})();